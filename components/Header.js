import React from "react";
import classNames from "classnames";
import Link from "next/link";
import { useRouter } from "next/router";

const navLinks = [
  { url: "/our-work", title: "Our Work" },
  { url: "/our-services", title: "Our Services" },
  { url: "/about-us", title: "About Us" },
  { url: "/careers", title: "Careers" },
  { url: "/contact", title: "Contact" },
];

// the site-wide Header
class Header extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      navActive: false,
    };

    this.toggleMenu = this.toggleMenu.bind(this);
    this.handleResize = this.handleResize.bind(this);
  }

  componentDidMount() {
    const body = document.querySelector("body");
    if (body) {
      body.classList.remove("nav-open"); // ensure this doesn't get stuck on the body when navigating
    }
    window.addEventListener("resize", this.handleResize);
  }

  componentWillUnmount() {
    window.removeEventListener("resize", this.handleResize);
  }

  toggleMenu() {
    const body = document.querySelector("body");
    if (body) {
      if (!this.state.navActive) {
        body.classList.add("nav-open");
      } else {
        body.classList.remove("nav-open");
      }
    }

    this.setState({
      navActive: !this.state.navActive,
    });
  }

  // this just handles when the nav is left open, then the window gets resized
  handleResize() {
    if (this.state.navActive && window.innerWidth > 991) {
      const body = document.querySelector("body");
      if (body) {
        body.classList.remove("nav-open");
      }
      this.setState({
        navActive: false,
      });
    }
  }

  render() {
    const { inlineHeader } = this.props;
    const headerClasses = classNames(
      { "nav-active": this.state.navActive },
      { "nav-inline": inlineHeader }
    );
    const headerNavClasses = classNames("header-nav", {
      active: this.state.navActive,
    });

    return (
      <header id={`header-main`} className={headerClasses}>
        <Link href="/" legacyBehavior>
          <div title="Home" className="header-logo-link">
            <a href="/" id="header-logo-eh">
              <svg className="evans-hunt" width="" height="" viewBox="0 0 193 36" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="evanshunt">
                <path d="M53.9167 18.0636C51.9048 18.4907 50.1802 18.76 48.5228 19.2336C47.1336 19.6329 46.2809 20.6543 46.233 22.1121C46.1755 23.9321 46.1372 25.7614 46.2426 27.5721C46.3863 29.9771 48.0246 31.2029 50.4677 30.915C51.9431 30.7386 53.2556 29.5964 53.4377 27.7486C53.7443 24.6286 53.7634 21.4807 53.9071 18.0636M46.2138 12.2043H41.2318C41.4235 9.97571 41.4043 7.775 41.8642 5.67643C42.3815 3.31785 44.1731 1.87857 46.5491 1.19143C48.5898 0.59714 50.6784 0.550711 52.7575 1.015C56.3311 1.80428 58.4963 4.29286 58.5442 7.85857C58.6209 13.8293 58.5825 19.8 58.5921 25.7707C58.5921 28.5657 58.5921 31.37 58.5921 34.2393H54.2808C54.1658 33.6636 54.0509 33.0414 53.9071 32.3171C53.6868 32.5029 53.4664 32.6514 53.2844 32.8371C51.1479 34.9729 48.5419 35.3907 45.7731 34.4714C42.9755 33.5429 41.6342 31.3329 41.4714 28.5843C41.3085 25.91 41.3468 23.2264 41.4714 20.5429C41.5767 18.24 42.7456 16.4479 45.1025 15.7886C47.421 15.1479 49.8258 14.795 52.1922 14.3214C52.6808 14.2286 53.179 14.1729 53.7443 14.0893C53.7443 12.0929 53.8592 10.1429 53.7155 8.21143C53.5335 5.76928 52.1347 4.69214 49.6341 4.77571C47.536 4.85 46.3 6.16857 46.2234 8.49928C46.1851 9.66928 46.2234 10.8486 46.2234 12.1857" fill="black"/>
                <path d="M13.1316 15.2129C13.1986 15.0736 13.2561 15.0086 13.2561 14.9343C13.2753 13.2721 13.3136 11.6007 13.2753 9.93857C13.2465 8.97286 13.1986 7.97929 12.9495 7.05072C12.528 5.51857 11.3112 4.79429 9.51005 4.79429C7.67055 4.79429 6.30051 5.47214 6.08973 7.03214C5.73525 9.73429 5.73525 12.4736 5.58196 15.2129H13.1316ZM17.9986 23.0407C17.9986 25.1114 18.2285 27.1264 17.9507 29.0764C17.4237 32.8093 14.7507 34.7871 10.2669 34.9914C9.06934 35.0471 7.82385 34.945 6.655 34.7036C3.07181 33.9514 0.992789 31.4629 0.964047 27.8229C0.906563 21.5271 0.983208 15.2314 0.925724 8.92643C0.87782 2.58429 5.13166 0.346431 10.5352 0.792145C15.7567 1.21929 18.0465 3.75429 18.1231 8.82429C18.171 12.2321 18.1231 15.64 18.1231 19.2336H5.70651C5.70651 19.7629 5.69692 20.2364 5.70651 20.7007C5.78315 23.2543 5.70651 25.8171 6.00351 28.3521C6.21428 30.1814 7.50768 30.9521 9.50047 30.9614C11.4837 30.9614 12.6813 30.2093 13.0166 28.3614C13.3232 26.6621 13.2944 24.8979 13.419 23.0593H17.9986V23.0407Z" fill="black"/>
                <path d="M63.6316 1.47929H67.8088C67.9237 2.15715 68.0291 2.81643 68.1632 3.65215C69.5333 2.09215 71.0279 1.015 73.0973 0.885003C77.5524 0.615717 80.5607 3.095 80.6661 7.45C80.7906 12.6036 80.7236 17.7664 80.7332 22.9293C80.7332 26.6621 80.7332 30.4043 80.7332 34.23H75.9428V32.9393C75.9428 25.26 75.9428 17.5807 75.9428 9.91072C75.9428 9.10286 75.9332 8.27643 75.7512 7.49643C75.3392 5.71357 74.3811 4.89643 72.8291 4.81286C70.8937 4.70143 69.562 5.38857 68.968 7.06C68.604 8.07215 68.4028 9.19572 68.4028 10.2636C68.3549 17.7757 68.374 25.2971 68.374 32.8093V34.23H63.6507V1.47929H63.6316Z" fill="black"/>
                <path d="M102.414 11.8422H97.5186C97.4515 10.5886 97.4324 9.38144 97.3174 8.18358C97.097 5.97358 95.9665 4.85929 93.9833 4.79429C91.5498 4.72001 90.3905 5.59287 89.9307 7.84929C89.1546 11.6843 90.0935 13.4764 93.7534 15.1664C95.1809 15.8257 96.6467 16.4386 98.0455 17.1629C100.45 18.4164 102.022 20.3293 102.165 23.0221C102.28 25.195 102.28 27.4143 101.954 29.5593C101.571 32.02 99.9138 33.6914 97.4228 34.4529C95.1809 35.14 92.9007 35.2236 90.6109 34.6664C87.2385 33.8493 85.4948 31.9179 85.0732 28.2872C84.8816 26.6157 85.0445 24.8979 85.0445 23.1057H89.7199C89.739 23.4957 89.7582 23.9229 89.7774 24.35C89.8444 25.52 89.8061 26.7086 89.9881 27.86C90.3426 30.0886 91.5498 30.9986 93.8683 30.9429C95.8899 30.8964 97.0587 29.7914 97.327 27.6557C97.3749 27.2564 97.394 26.8479 97.4419 26.4393C97.8252 23.4493 96.4743 21.4714 93.7055 20.255C92.1438 19.5679 90.6205 18.8157 89.1259 18.0079C86.2708 16.4479 84.9391 14.0057 85.0062 10.8672C85.0349 9.33501 85.0062 7.75644 85.3607 6.28001C86.405 1.93429 90.2372 0.383579 94.6923 0.801436C98.927 1.20072 101.293 2.95572 101.954 6.20572C102.328 8.00715 102.28 9.89215 102.424 11.8422" fill="black"/>
                <path d="M33.7684 34.2764H25.8452C24.159 23.375 22.4728 12.4922 20.777 1.50715H25.5578C26.9278 10.7929 28.2978 20.1157 29.6679 29.4386C29.735 29.4386 29.8116 29.4479 29.8787 29.4571C31.2295 20.1621 32.59 10.8671 33.9505 1.49786H38.7313C37.0738 12.4179 35.4259 23.2914 33.7493 34.2764" fill="black"/>
                <path d="M118.309 19.5679V34.295H113.557V1.55357H118.242V15.3336H125.897V1.56286H130.687V34.2857H125.993V19.5679H118.309Z" fill="black"/>
                <path d="M162.974 34.3321H158.232V1.58143H162.495C162.581 2.24071 162.677 2.9 162.792 3.75428C164.162 2.12928 165.685 1.08928 167.736 0.949997C171.922 0.652854 174.758 2.87214 175.266 6.92071C175.343 7.56143 175.381 8.22071 175.391 8.86143C175.391 17.0236 175.391 25.1857 175.391 33.3571C175.391 33.6357 175.362 33.9236 175.343 34.295H170.591V32.865C170.591 25.2693 170.591 17.6736 170.581 10.0779C170.581 9.19571 170.543 8.28571 170.332 7.42214C169.949 5.81571 168.991 5.00785 167.535 4.87785C165.714 4.72 164.335 5.305 163.75 6.84643C163.3 8.035 163.022 9.36285 163.003 10.6257C162.936 18.0543 162.965 25.4921 162.965 32.9207V34.3321" fill="black"/>
                <path d="M148.153 1.54428H152.886V34.3043H148.699C148.603 33.6636 148.498 33.0043 148.392 32.2893C148.239 32.3636 148.124 32.3821 148.057 32.4564C145.805 34.8521 143.056 35.6229 140.124 34.5736C137.125 33.5057 135.995 31.11 135.841 28.2686C135.688 25.5107 135.784 22.7436 135.784 19.9857C135.784 14.1357 135.784 8.28571 135.784 2.44499C135.784 2.16642 135.813 1.89714 135.841 1.55357H140.574V2.94642C140.574 10.6257 140.574 18.2957 140.584 25.975C140.584 26.7829 140.632 27.6 140.814 28.3893C141.197 30.0236 142.117 30.8407 143.554 30.9986C145.403 31.1936 146.84 30.5807 147.434 28.9929C147.884 27.8043 148.124 26.4764 148.134 25.2043C148.201 17.8129 148.162 10.4214 148.162 3.03V1.55357L148.153 1.54428Z" fill="black"/>
                <path d="M178.591 1.56285V5.47214H183.371V34.295H188.219V5.45357H192.991V1.56285H178.591Z" fill="black"/>
              </svg>

            </a>
            <a id="header-logo-mo" href="https://www.modop.com/" target="_blank" rel="noreferrer" >
              <svg className="modop" width="" height="" viewBox="0 0 65 30" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="a modop company">
                <path className="separator" d="M0.839996 27.51V0.16" stroke="#E43E30"/>
                <g className="part-of">
                <path d="M17.31 8.98C17.31 9.56 17.44 9.84 17.82 9.84C18.03 9.84 18.23 9.76 18.42 9.67L18.49 9.87C18.18 10.34 17.73 10.56 17.23 10.56C16.59 10.56 16.21 10.1 16.14 9.37C15.68 9.91 14.95 10.56 14.03 10.56C13.01 10.56 12.37 9.89 12.37 8.92C12.37 7.82 13.2 7.36 14.23 6.97L16.12 6.26V5.37C16.12 4.47 15.78 3.81 14.92 3.81C14.17 3.81 13.86 4.31 13.86 4.98C13.86 5.2 13.89 5.4 13.95 5.66L13.26 5.76C12.93 5.66 12.75 5.41 12.75 5.04C12.75 4.06 13.77 3.48 15.09 3.48C16.58 3.48 17.32 4.12 17.32 5.5V8.97L17.31 8.98ZM16.12 9.1V6.64L14.55 7.28C13.9 7.54 13.52 7.91 13.52 8.6C13.52 9.29 13.91 9.79 14.66 9.79C15.2 9.79 15.59 9.54 16.13 9.1H16.12Z" fill="black"/>
                </g>
                <g className="modop-name">
                <path d="M30.52 5.6C30.52 4.74 30.23 4.33 29.5 4.33C28.9 4.33 28.41 4.64 27.96 5.01V9.42C27.96 9.9 28.14 10 28.8 10.04V10.42H25.64V10.04C26.29 10 26.49 9.91 26.49 9.42V5.6C26.49 4.74 26.19 4.33 25.46 4.33C24.86 4.33 24.37 4.64 23.91 5.01V9.42C23.91 9.9 24.11 10 24.76 10.04V10.42H21.58V10.04C22.23 10 22.44 9.91 22.44 9.42V4.75L21.61 4.29V4.11L23.73 3.43H23.95L23.9 4.69C24.49 4.01 25.16 3.43 26.22 3.43C27.16 3.43 27.69 3.84 27.87 4.73C28.46 4.05 29.21 3.43 30.25 3.43C31.44 3.43 31.98 4.15 31.98 5.55V9.42C31.98 9.9 32.19 10 32.84 10.04V10.42H29.67V10.04C30.32 10 30.51 9.91 30.51 9.42V5.6H30.52Z" fill="black"/>
                <path d="M33.3 7.14C33.3 4.9 34.71 3.42 36.55 3.42C38.39 3.42 39.73 4.79 39.73 6.81C39.73 9.06 38.32 10.54 36.48 10.54C34.64 10.54 33.3 9.18 33.3 7.14ZM38.18 7.21C38.18 5.38 37.66 3.86 36.48 3.86C35.41 3.86 34.86 5.02 34.86 6.77C34.86 8.52 35.38 10.12 36.55 10.12C37.62 10.12 38.19 8.95 38.19 7.21H38.18Z" fill="black"/>
                <path d="M44.43 1V0.799999L46.51 0.16H46.72V9.09C46.72 9.54 46.75 9.65 47.3 9.71L47.64 9.74V10.08L45.47 10.55H45.21L45.26 9.33C44.74 10.05 44.08 10.55 43.15 10.55C41.55 10.55 40.52 9.23 40.52 7.32C40.52 4.9 41.93 3.45 43.78 3.45C44.42 3.45 44.93 3.63 45.26 3.93V1.45L44.43 1ZM41.93 6.73C41.93 8.33 42.62 9.56 43.92 9.56C44.47 9.56 44.92 9.38 45.26 9.02V5.67C45.26 4.54 44.71 3.88 43.87 3.88C42.68 3.88 41.93 5.02 41.93 6.73Z" fill="black"/>
                <path d="M50.73 7.14C50.73 4.9 52.14 3.42 53.98 3.42C55.82 3.42 57.16 4.79 57.16 6.81C57.16 9.06 55.75 10.54 53.91 10.54C52.07 10.54 50.73 9.18 50.73 7.14ZM55.61 7.21C55.61 5.38 55.09 3.86 53.91 3.86C52.84 3.86 52.29 5.02 52.29 6.77C52.29 8.52 52.81 10.12 53.98 10.12C55.05 10.12 55.62 8.95 55.62 7.21H55.61Z" fill="black"/>
                <path d="M58.48 4.74L57.65 4.28V4.1L59.76 3.42H60L59.95 4.61C60.42 3.93 61.13 3.42 62.15 3.42C63.77 3.42 64.74 4.62 64.74 6.57C64.74 9.06 63.23 10.54 61.35 10.54C60.8 10.54 60.28 10.4 59.95 10.12V12.15C59.95 12.67 60.2 12.74 61.08 12.8V13.18H57.63V12.8C58.28 12.76 58.49 12.67 58.49 12.18V4.73L58.48 4.74ZM63.26 7.15C63.26 5.62 62.7 4.32 61.32 4.32C60.8 4.32 60.27 4.57 59.94 4.92V8.52C59.94 9.61 60.42 10.1 61.3 10.1C62.5 10.1 63.25 8.8 63.25 7.14L63.26 7.15Z" fill="black"/>
                </g>
                <g className="company">
                <path d="M15.62 25.5C16.49 25.5 17.09 25.09 17.54 24.41L17.7 24.49C17.31 25.72 16.45 26.43 15.24 26.43C13.55 26.43 12.38 25.1 12.38 23.12C12.38 20.97 13.6 19.34 15.56 19.34C16.79 19.34 17.52 19.88 17.52 20.73C17.52 21.07 17.36 21.39 17.1 21.53H16.35C16.38 21.39 16.4 21.23 16.4 20.98C16.4 20.35 16.18 19.75 15.32 19.75C14.14 19.75 13.43 20.98 13.43 22.55C13.43 24.31 14.27 25.5 15.62 25.5Z" fill="black"/>
                <path d="M18.21 23.06C18.21 20.8 19.59 19.34 21.33 19.34C23.17 19.34 24.38 20.73 24.38 22.71C24.38 24.97 23 26.43 21.26 26.43C19.42 26.43 18.21 25.07 18.21 23.06ZM23.14 23.04C23.14 21.31 22.55 19.74 21.28 19.74C20.11 19.74 19.47 20.95 19.47 22.72C19.47 24.49 20.06 26.01 21.33 26.01C22.5 26.01 23.14 24.8 23.14 23.03V23.04Z" fill="black"/>
                <path d="M33.86 21.48C33.86 20.53 33.53 20.1 32.76 20.1C32.09 20.1 31.55 20.47 31.05 20.9V25.3C31.05 25.81 31.26 25.92 31.96 25.96V26.3H28.97V25.96C29.67 25.92 29.88 25.82 29.88 25.3V21.48C29.88 20.53 29.55 20.1 28.78 20.1C28.11 20.1 27.57 20.47 27.07 20.9V25.3C27.07 25.81 27.28 25.92 27.98 25.96V26.3H24.99V25.96C25.69 25.92 25.9 25.82 25.9 25.3V20.6L25.05 20.14V20L26.98 19.34H27.14L27.09 20.59C27.71 19.91 28.36 19.34 29.4 19.34C30.32 19.34 30.82 19.76 31 20.63C31.62 19.95 32.35 19.34 33.39 19.34C34.57 19.34 35.07 20.08 35.07 21.49V25.3C35.07 25.81 35.28 25.92 35.98 25.96V26.3H32.99V25.96C33.69 25.92 33.9 25.82 33.9 25.3V21.48H33.86Z" fill="black"/>
                <path d="M37.14 20.6L36.29 20.14V20L38.22 19.34H38.38L38.33 20.51C38.84 19.81 39.55 19.34 40.54 19.34C42.19 19.34 43.13 20.6 43.13 22.49C43.13 24.92 41.66 26.43 39.83 26.43C39.25 26.43 38.7 26.27 38.33 25.96V28.06C38.33 28.6 38.59 28.68 39.5 28.74V29.08H36.24V28.74C36.94 28.7 37.15 28.6 37.15 28.08V20.59L37.14 20.6ZM41.94 23.03C41.94 21.55 41.39 20.1 39.89 20.1C39.3 20.1 38.69 20.39 38.33 20.81V24.39C38.33 25.56 38.89 26.05 39.83 26.05C41.12 26.05 41.94 24.72 41.94 23.03Z" fill="black"/>
                <path d="M48.77 24.84C48.77 25.42 48.9 25.71 49.28 25.71C49.49 25.71 49.69 25.63 49.88 25.54L49.95 25.74C49.63 26.21 49.19 26.44 48.69 26.44C48.05 26.44 47.67 25.98 47.6 25.25C47.14 25.79 46.41 26.44 45.49 26.44C44.47 26.44 43.82 25.77 43.82 24.8C43.82 23.7 44.65 23.24 45.68 22.84L47.57 22.13V21.24C47.57 20.33 47.23 19.68 46.36 19.68C45.61 19.68 45.3 20.18 45.3 20.85C45.3 21.07 45.33 21.27 45.39 21.53L44.69 21.63C44.36 21.53 44.18 21.28 44.18 20.91C44.18 19.93 45.2 19.35 46.53 19.35C48.03 19.35 48.76 19.99 48.76 21.37V24.85L48.77 24.84ZM47.57 24.96V22.49L45.99 23.13C45.33 23.39 44.95 23.76 44.95 24.46C44.95 25.16 45.34 25.65 46.09 25.65C46.63 25.65 47.02 25.4 47.56 24.95L47.57 24.96Z" fill="black"/>
                <path d="M55.22 21.48C55.22 20.51 54.83 20.1 54.05 20.1C53.38 20.1 52.74 20.47 52.24 20.9V25.3C52.24 25.81 52.45 25.92 53.15 25.96V26.3H50.16V25.96C50.86 25.92 51.07 25.82 51.07 25.3V20.6L50.22 20.14V20L52.15 19.34H52.31L52.26 20.59C52.88 19.91 53.64 19.34 54.65 19.34C55.86 19.34 56.42 20.04 56.42 21.45V25.3C56.42 25.81 56.63 25.92 57.33 25.96V26.3H54.34V25.96C55.04 25.92 55.25 25.82 55.25 25.3V21.48H55.22Z" fill="black"/>
                <path d="M62.75 20.6C62.8 20.46 62.83 20.35 62.83 20.25C62.83 19.94 62.57 19.9 61.91 19.82V19.48H64.02V19.82C63.53 19.94 63.46 20.04 63.35 20.3L60.57 27.67C60.2 28.63 59.81 29.17 59.02 29.17C58.63 29.17 58.18 28.93 58.07 28.51V28.13C58.29 28.2 58.48 28.25 58.83 28.25C59.53 28.25 60 28.05 60.31 27.16L60.56 26.49L57.92 20.31C57.8 20.03 57.74 19.94 57.25 19.83V19.49H60.15V19.83C59.49 19.91 59.23 19.95 59.23 20.26C59.23 20.36 59.26 20.47 59.31 20.63L61.1 25.08L62.74 20.61L62.75 20.6Z" fill="black"/>
                </g>
              </svg>
            </a>
            
          </div>
        </Link>
        <button
          className={classNames("header-nav-toggle", {
            active: this.state.navActive,
          })}
          onClick={this.toggleMenu}
          aria-label="Toggle navigation"
        >
          <div>
            <span className="icon-bar"></span>
            <span className="icon-bar"></span>
            <span className="icon-bar"></span>
          </div>
        </button>

        <nav className={headerNavClasses}>
          <div className="header-nav-links">
            {navLinks.map((navLink, i) => {
              return <NavLink navLink={navLink} key={i} />;
            })}
          </div>

          <div className="header-nav-contact-box">
            <div className="header-nav-contact">
              <h4 className="header-nav-contact-heading">Get in touch</h4>
              <a
                target="_blank"
                rel="noreferrer"
                className={"header-nav-contact-link"}
                href="mailto:info@evanshunt.com"
              >
                info@evanshunt.com
              </a>
            </div>
          </div>
        </nav>
      </header>
    );
  }
}

// this just allows for the active class to be added
const NavLink = ({ navLink }) => {
  const router = useRouter();
  const classes = classNames("header-nav-link", {
    active: router.pathname.indexOf(navLink.url) !== -1,
  });
  return (
    <Link href={navLink.url} legacyBehavior>
      <a className={classes} title={navLink.title}>
        <span>{navLink.title}</span>
      </a>
    </Link>
  );
};

export default Header;
